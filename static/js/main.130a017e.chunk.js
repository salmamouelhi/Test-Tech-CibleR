(this.webpackJsonplive=this.webpackJsonplive||[]).push([[0],{23:function(e,t,n){},31:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(9),a=n.n(o),i=(n(23),n(5)),s=(n(31),n(12)),l=n(14),u=n(2),d=function(e){var t=e.behaviorId;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"center",style:{color:"black"},children:["Thanks for you answer, your behaviorId is ",t]}),Object(u.jsx)("div",{className:"right"})]})},b=n(15),p=(n(33),function(e){var t=e.onChange,n=e.id,c=e.label,r=e.value,o=(e.placeholder,e.type),a=e.children,i=/^06\d{8}$/.test(r);return Object(u.jsxs)("div",{className:"formfield ".concat(o," ").concat(n),children:[Object(u.jsx)("span",{children:c||a}),Object(u.jsx)("input",{type:"number",value:r,id:n,onChange:function(e){return t(e.target.value,n)},placeholder:"Enter a phone number",className:"inputPhoneNumber"}),Object(u.jsx)("div",{className:"testInput",children:i?"Correcte Phone number":"Wrong number format"})]})}),j=(n(34),n(3)),h=function(e,t){t||(t=window.location.href),e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},f={prod:"https://prod.cibler.io/",qa:"https://qa.cibler.io/",local:"http://localhost:8080/"},m={endpoint:f[h("endpoint")||"prod"],accessToken:"",customerId:318,inPageMode:!1},g=function(){return window.CiblerContext||{campaign:{}}},x=function(){var e=Object(l.a)(Object(s.a)().mark((function e(){var t,n,c,r,o,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g().endpoint,"/api/campaigns/search/template/687630512/318?campaignId=63080118")).then((function(e){if(e.ok&&200===e.status)return e.json()}));case 2:return(n=e.sent)||(n={id:0}),(null===(t=g().campaign)||void 0===t?void 0:t.id)!==n.id&&(window.CiblerContext=m),console.log(n),g().campaign=n,g().campaign.useGiftcode="true"===n.useGiftcode,c=document.querySelector("head"),(r=document.createElement("link")).setAttribute("href","https://cdn.cibler.io/campaigns/assets/".concat(n.id,"/mobile/style.css")),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),c.appendChild(r),(o=document.querySelector("#ciblerDivRoot")).style.setProperty("--background",'url("'.concat(v("background",null,!0),'")')),o.style.setProperty("--backgroundValidation",'url("'.concat(v("backgroundValidation",null,!0),'")')),o.style.setProperty("--backgroundMobile",'url("'.concat(v("background"),'")')),o.style.setProperty("--backgroundMobileValidation",'url("'.concat(v("backgroundValidation"),'")')),o.style.setProperty("--backgroundColor",n.backgroundColor||"#283847"),o.style.setProperty("--buttonColor",n.buttonColor||"#E13A06"),o.style.setProperty("--inputBorderColor",n.inputBorderColor||"transparent"),o.style.setProperty("--buttonTextColor",n.buttonTextColor||"#fff"),o.style.setProperty("--buttonDisableColor",n.buttonDisableColor||"#E1E1E1"),o.style.setProperty("--textColor",n.textColor||"#fff"),e.next=27,fetch("".concat(g().endpoint,"/api/campaigns/formdatas/").concat(n.id)).then((function(e){if(e.ok&&200===e.status)return e.json()}));case 27:return a=e.sent,g().form=a,O(),e.abrupt("return",n);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){localStorage.setItem("CiblerContext_".concat(m.customerId),JSON.stringify(g()))};window.saveContext=O;var v=function(e,t,n){return"https://cdn.cibler.io/campaigns/assets/".concat(g().campaign.id,"/").concat(n?"desktop":"mobile","/").concat(e,".").concat(t||"png")},C=n(45),y=function(){var e=Object(l.a)(Object(s.a)().mark((function e(t){var n,c,r,o;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g().endpoint,"/api/bienvenus/login?customerId=318"),c={phone:t,campaignId:63080118,customerId:318},r={Accept:"application/json","Content-Type":"application/json"},e.next=5,C.a.post(n,c,{headers:r});case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),r=n[0],o=n[1],a=Object(c.useState)(""),j=Object(i.a)(a,2),h=j[0],f=j[1],m=function(){var e=Object(l.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y(r);case 3:n=e.sent,f(n.behaviorId);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{children:Object(u.jsxs)(b.a,{show:e.show,onHide:function(){e.setShow(!1),o(""),f("")},backdrop:"static",keyboard:!1,children:[Object(u.jsx)(b.a.Header,{className:"header",closeButton:!0,children:Object(u.jsx)(b.a.Title,{className:"title",children:"Welcome to CibleR "})}),Object(u.jsx)(b.a.Body,{children:Object(u.jsxs)("form",{onSubmit:m,children:[Object(u.jsx)(p,{id:"phoneId",value:r,onChange:o}),Object(u.jsx)("button",{type:"submit",className:"login-button",children:"Login"})]})}),Object(u.jsx)(b.a.Footer,{children:h&&Object(u.jsx)(d,{behaviorId:h})})]})})},k=function(e){e.setScreen;var t=Object(c.useState)(!1),n=Object(i.a)(t,2),r=n[0],o=n[1];return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"right",children:[Object(u.jsx)("button",{onClick:function(){o(!0)},children:"Je me connecte"}),Object(u.jsx)(w,{show:r,setShow:o})]})})};var S=function(){var e=Object(c.useState)("landing"),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)(!1),s=Object(i.a)(a,2),l=s[0],b=s[1];r.a.useEffect((function(){g().endpoint||(!function(){try{var e=h("clearcache")?m:JSON.parse(localStorage.getItem("CiblerContext_".concat(m.customerId)));window.CiblerContext=Object(j.a)(Object(j.a)({},e||m),window.CiblerContext||{}),h("endpoint")&&(window.CiblerContext.endpoint=f[h("endpoint")])}catch(t){window.CiblerContext=m}}(),x().then((function(){b(!0)})))}));var p={landing:k,validation:d}[n];return Object(u.jsx)("div",{className:"appBackground",children:Object(u.jsx)("div",{className:"app ".concat(n),children:l&&Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(p,{setScreen:function(e){g().currentScreen=e,O(),o(e)}})})})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};n(41);a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("ciblerDivRoot")),I()}},[[42,1,2]]]);
//# sourceMappingURL=main.130a017e.chunk.js.map