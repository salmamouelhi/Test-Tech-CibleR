{"version":3,"sources":["components/Validation.js","components/Formfields/Textfield.js","tools/toolbox.js","tools/apitools.js","components/popUpLogin/index.js","components/Landing.js","App.js","reportWebVitals.js","index.js"],"names":["NoBudget","behaviorId","className","style","color","Formfield","onChange","id","label","value","type","placeholder","children","isPhoneNumber","test","e","target","getQueryString","name","url","window","location","href","replace","results","RegExp","exec","decodeURIComponent","endpoints","prod","qa","local","d","endpoint","accessToken","customerId","inPageMode","CiblerContext","campaign","fetchPartner","fetch","then","r","ok","status","json","result","console","log","useGiftcode","htmlHead","document","querySelector","addStyle","createElement","setAttribute","appendChild","app","setProperty","getImagePath","backgroundColor","buttonColor","inputBorderColor","buttonTextColor","buttonDisableColor","textColor","form","saveContext","localStorage","setItem","JSON","stringify","key","suffix","desktop","postToLoginService","phoneNumber","body","phone","campaignId","headers","Accept","axios","post","response","data","PhonePopup","props","useState","setPhoneNumber","setBehaviorId","handleSubmit","event","preventDefault","Modal","show","onHide","setShow","backdrop","keyboard","Header","closeButton","Title","Body","onSubmit","Footer","Landing","setScreen","onClick","App","screen","loaded","setLoaded","React","useEffect","previousContext","parse","getItem","initCiblerContext","Component","landing","validation","Validation","currentScreen","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"0QAWeA,EATE,SAAH,GAAsB,IAAjBC,EAAU,EAAVA,WACjB,OAAO,qCACL,sBAAKC,UAAU,SAASC,MAAO,CAAEC,MAAO,SAAU,UAAC,6CACNH,KAE7C,qBAAKC,UAAU,YAEnB,E,QCsBeG,G,MA5BG,SAAH,GAAmE,IAA9DC,EAAQ,EAARA,SAAUC,EAAE,EAAFA,GAAIC,EAAK,EAALA,MAAOC,EAAK,EAALA,MAAoBC,GAAF,EAAXC,YAAiB,EAAJD,MAAME,EAAQ,EAARA,SAG3DC,EADmB,YACcC,KAAKL,GAE5C,OACE,sBAAKP,UAAS,oBAAeQ,EAAI,YAAIH,GAAK,UACtC,+BACGC,GAASI,IAGd,uBACEF,KAAM,SACND,MAAOA,EACPF,GAAIA,EACJD,SAAU,SAACS,GAAC,OAAKT,EAASS,EAAEC,OAAOP,MAAOF,EAAG,EAC7CI,YAAa,uBACbT,UAAY,qBAGb,qBAAKA,UAAU,YAAW,SAAEW,EAAgB,wBAA0B,0BAM7E,G,eC7BMI,EAAiB,SAACC,EAAMC,GACvBA,IAAKA,EAAMC,OAAOC,SAASC,MAChCJ,EAAOA,EAAKK,QAAQ,SAAU,QAC9B,IACEC,EADU,IAAIC,OAAO,OAASP,EAAO,qBACrBQ,KAAKP,GACvB,OAAKK,EACAA,EAAQ,GACNG,mBAAmBH,EAAQ,GAAGD,QAAQ,MAAO,MAD5B,GADH,IAGvB,EAEMK,EAAY,CAChBC,KAAM,0BACNC,GAAI,wBACJC,MAAO,0BAGHC,EAAI,CACRC,SAAUL,EAAUX,EAAe,aAAe,QAClDiB,YAAa,GACbC,WAAY,IACZC,YAAY,GAGRC,EAAgB,WAAH,OAASjB,OAAOiB,eAAiB,CAClDC,SAAU,CAAC,EACX,EAyBIC,EAAY,iDAAG,wHACAC,MAAM,GAAD,OACnBH,IAAgBJ,SAAQ,qEAC3BQ,MAAK,SAACC,GACN,GAAIA,EAAEC,IAAmB,MAAbD,EAAEE,OACZ,OAAOF,EAAEG,MAEb,IAAG,KAAD,EAoC+D,OA1C7DC,EAAM,UASRA,EAAS,CAACvC,GAAI,KAGY,QAAxB,EAAA8B,IAAgBC,gBAAQ,aAAxB,EAA0B/B,MAAOuC,EAAOvC,KAC1Ca,OAAOiB,cAAgBL,GAEzBe,QAAQC,IAAIF,GACZT,IAAgBC,SAAWQ,EAC3BT,IAAgBC,SAASW,YAAqC,SAAvBH,EAAOG,YAIxCC,EAAWC,SAASC,cAAc,SAClCC,EAAWF,SAASG,cAAc,SAE/BC,aAAa,OAAO,0CAAD,OACgBT,EAAOvC,GAAE,sBAErD8C,EAASE,aAAa,MAAM,cAC5BF,EAASE,aAAa,OAAO,YAC7BL,EAASM,YAAYH,IAEfI,EAAMN,SAASC,cAAc,mBAC/BjD,MAAMuD,YAAY,eAAe,QAAD,OAAUC,EAAa,aAAc,MAAM,GAAK,OACpFF,EAAItD,MAAMuD,YAAY,yBAAyB,QAAD,OAAUC,EAAa,uBAAwB,MAAM,GAAK,OACxGF,EAAItD,MAAMuD,YAAY,qBAAqB,QAAD,OAAUC,EAAa,cAAa,OAC9EF,EAAItD,MAAMuD,YAAY,+BAA+B,QAAD,OAAUC,EAAa,wBAAuB,OAElGF,EAAItD,MAAMuD,YAAY,oBAAqBZ,EAAOc,iBAAmB,WACrEH,EAAItD,MAAMuD,YAAY,gBAAiBZ,EAAOe,aAAe,WAC7DJ,EAAItD,MAAMuD,YAAY,qBAAsBZ,EAAOgB,kBAAoB,eACvEL,EAAItD,MAAMuD,YAAY,oBAAqBZ,EAAOiB,iBAAmB,QACrEN,EAAItD,MAAMuD,YAAY,uBAAwBZ,EAAOkB,oBAAsB,WAC3EP,EAAItD,MAAMuD,YAAY,cAAeZ,EAAOmB,WAAa,QAAQ,UAE9CzB,MAAM,GAAD,OACnBH,IAAgBJ,SAAQ,oCAA4Ba,EAAOvC,KAC9DkC,MAAK,SAACC,GACN,GAAIA,EAAEC,IAAmB,MAAbD,EAAEE,OACZ,OAAOF,EAAEG,MAEb,IAAG,KAAD,GAIY,OAVRqB,EAAI,OAQV7B,IAAgB6B,KAAOA,EAEvBC,IAAc,kBAEPrB,GAAM,4CACd,kBA1DiB,mCAsEZqB,EAAc,WAClBC,aAAaC,QAAQ,iBAAD,OAAkBrC,EAAEG,YAAcmC,KAAKC,UAAUlC,KACvE,EACAjB,OAAO+C,YAAcA,EAErB,IAmBMR,EAAe,SAACa,EAAKC,EAAQC,GAAO,uDACErC,IAAgBC,SAAS/B,GAAE,YACrEmE,EAAU,UAAY,SAAQ,YAC1BF,EAAG,YAAIC,GAAU,MAAK,E,QC9ItBE,EAAkB,iDAAG,WAAOC,GAAW,uFAY5C,OAXK3C,EAAQ,UAAMI,IAAgBJ,SAAQ,uCAEtC4C,EAAO,CACXC,MAAOF,EACPG,WAAY,SACZ5C,WAAY,KAGR6C,EAAU,CACdC,OAAQ,mBACR,eAAgB,oBAChB,EAAD,OACwBC,IAAMC,KAAKlD,EAAU4C,EAAO,CAACG,YAAU,KAAD,EAA/C,OAARI,EAAQ,yBACPA,EAASC,MAAI,2CACrB,gBAfuB,sCCqDTC,EAlDI,SAACC,GAClB,MAAsCC,mBAAS,IAAG,mBAA3CZ,EAAW,KAAEa,EAAc,KAClC,EAAoCD,mBAAS,IAAG,mBAAzCvF,EAAU,KAAEyF,EAAa,KAY1BC,EAAY,iDAAG,WAAOC,GAAK,iFACR,OAAvBA,EAAMC,iBAAiB,SACFlB,EAAmBC,GAAa,KAAD,EAA9C9B,EAAM,OACZ4C,EAAc5C,EAAO7C,YAAY,2CAClC,gBAJiB,sCAKlB,OACE,8BACI,eAAC6F,EAAA,EAAK,CACJC,KAAMR,EAAMQ,KACZC,OAhBY,WAClBT,EAAMU,SAAQ,GACdR,EAAe,IACfC,EAAc,GAChB,EAaQQ,SAAS,SACTC,UAAU,EAAM,UAElB,cAACL,EAAA,EAAMM,OAAM,CAAElG,UAAU,SAASmG,aAAW,WAC7C,cAACP,EAAA,EAAMQ,MAAK,CAACpG,UAAU,QAAO,SAAC,yBAE/B,cAAC4F,EAAA,EAAMS,KAAI,UACX,uBAAMC,SAAUb,EAAa,UAE7B,cAAC,EAAS,CACVpF,GAAG,UAAUE,MAAOmE,EAAatE,SAAUmF,IAE3C,wBAAQ/E,KAAK,SAASR,UAAY,eAAc,SAAC,eAKjD,cAAC4F,EAAA,EAAMW,OAAM,UAEZxG,GAAc,cAAC,EAAQ,CAACA,WAAYA,UAK7C,EC9BeyG,EApBC,SAAH,GAAc,EAATC,UAAgB,IAEhC,EAAwBnB,oBAAS,GAAM,mBAAhCO,EAAI,KAAEE,EAAO,KAKpB,OACE,mCAEC,sBAAK/F,UAAU,QAAO,UACrB,wBAAQ0G,QARQ,WAClBX,GAAQ,EACV,EAMiC,SAAC,mBAC9B,cAAC,EAAU,CAACF,KAAMA,EAAME,QAASA,QAMvC,EC8BeY,MA3Cf,WACE,MAA4BrB,mBAAS,WAAU,mBAAxCsB,EAAM,KAAEH,EAAS,KACxB,EAA4BnB,oBAAS,GAAM,mBAApCuB,EAAM,KAAEC,EAAS,KAExBC,IAAMC,WAAU,WACT7E,IAAgBJ,YJeC,WACxB,IACE,IAAMkF,EAAkBlG,EAAe,cACnCe,EACAsC,KAAK8C,MAAMhD,aAAaiD,QAAQ,iBAAD,OAAkBrF,EAAEG,cAEvDf,OAAOiB,cAAa,2BACd8E,GAAmBnF,GACnBZ,OAAOiB,eAAiB,CAAC,GAG3BpB,EAAe,cACjBG,OAAOiB,cAAcJ,SAAWL,EAAUX,EAAe,aAI7D,CAFE,MAAOF,GACPK,OAAOiB,cAAgBL,CACzB,CACF,CI/BMsF,GAEA/E,IAAeE,MAAK,WAClBuE,GAAU,EACZ,IAEJ,IAEA,IAWMO,EAXS,CACbC,QAASd,EACTe,WAAYC,GASWZ,GACzB,OACE,qBAAK5G,UAAU,gBAAe,SAC5B,qBAAKA,UAAS,cAAS4G,GAAS,SAC7BC,GACC,mCACE,cAACQ,EAAS,CACRZ,UAbe,SAACG,GAC1BzE,IAAgBsF,cAAgBb,EAChC3C,IACAwC,EAAUG,EACZ,SAkBF,ECxCec,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBrF,MAAK,YAAkD,IAA/CsF,EAAM,EAANA,OAAQC,EAAM,EAANA,OAAQC,EAAM,EAANA,OAAQC,EAAM,EAANA,OAAQC,EAAO,EAAPA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,EACV,GAEJ,E,MCHAO,IAASC,OACP,cAAC,IAAMC,WAAU,UACf,cAAC,EAAG,MAENnF,SAASoF,eAAe,kBAM1BX,G","file":"static/js/main.130a017e.chunk.js","sourcesContent":["import React from 'react';\n\nconst NoBudget = ({behaviorId}) => {\n  return <>\n    <div className=\"center\" style={{ color: 'black' }}>\n      Thanks for you answer, your behaviorId is {behaviorId}\n    </div>\n    <div className=\"right\"/>\n  </>\n}\n\nexport default NoBudget;","import React   from 'react';\nimport './Textfields.css';\n\nconst Formfield = ({onChange, id, label, value, placeholder, type, children}) => {\n  \n  const phoneNumberRegex = /^06\\d{8}$/  ;\n  const isPhoneNumber = phoneNumberRegex.test(value ); \n  \n  return (\n    <div className={`formfield ${type} ${id}`}>\n        <span>\n          {label || children}\n        </span>\n       \n      <input\n        type={'number'}\n        value={value}\n        id={id}\n        onChange={(e) => onChange(e.target.value, id)}\n        placeholder={\"Enter a phone number\"}\n        className = \"inputPhoneNumber\"\n        \n      />\n       <div className='testInput'>{isPhoneNumber ? 'Correcte Phone number' : 'Wrong number format'}</div> \n      \n      \n    </div>\n     \n  )\n}\n\nexport default Formfield;","const getQueryString = (name, url) => {\n  if (!url) url = window.location.href;\n  name = name.replace(/[[\\]]/g, \"\\\\$&\");\n  var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n    results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return \"\";\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n};\n\nconst endpoints = {\n  prod: 'https://prod.cibler.io/',\n  qa: \"https://qa.cibler.io/\",\n  local: \"http://localhost:8080/\",\n};\n\nconst d = {\n  endpoint: endpoints[getQueryString('endpoint') || 'prod'],\n  accessToken: '',\n  customerId: 318,\n  inPageMode: false,\n};\n\nconst CiblerContext = () => window.CiblerContext || {\n  campaign: {}\n};\n\nconst userLoggedIn = ()=> {\n  return !!window.CiblerContext.accessToken\n}\n\nconst initCiblerContext = () => {\n  try {\n    const previousContext = getQueryString('clearcache')\n      ? d\n      : JSON.parse(localStorage.getItem(`CiblerContext_${d.customerId}`))\n\n    window.CiblerContext = {\n      ...(previousContext || d),\n      ...(window.CiblerContext || {}),\n    };\n\n    if (getQueryString('endpoint')) {\n      window.CiblerContext.endpoint = endpoints[getQueryString('endpoint')]\n    }\n  } catch (e) {\n    window.CiblerContext = d;\n  }\n};\n\nconst fetchPartner = async () => {\n  let result = await fetch(\n    `${CiblerContext().endpoint}/api/campaigns/search/template/687630512/318?campaignId=63080118`\n  ).then((r) => {\n    if (r.ok && r.status === 200) {\n      return r.json();\n    }\n  });\n\n  if (!result) {\n    result = {id: 0};\n  }\n\n  if (CiblerContext().campaign?.id !== result.id) {\n    window.CiblerContext = d;\n  }\n  console.log(result)\n  CiblerContext().campaign = result;\n  CiblerContext().campaign.useGiftcode = result.useGiftcode === 'true';\n\n  //Customize browser tab icon based on partner\n  //create new link tag\n  const htmlHead = document.querySelector(\"head\");\n  const addStyle = document.createElement(\"link\");\n  //set new link tag attributes\n  addStyle.setAttribute(\"href\",\n    `https://cdn.cibler.io/campaigns/assets/${result.id}/mobile/style.css`\n  );\n  addStyle.setAttribute(\"rel\",\"stylesheet\");\n  addStyle.setAttribute(\"type\",\"text/css\");\n  htmlHead.appendChild(addStyle);\n\n  const app = document.querySelector(\"#ciblerDivRoot\");\n  app.style.setProperty('--background', `url(\"${getImagePath('background', null, true)}\")`);\n  app.style.setProperty('--backgroundValidation', `url(\"${getImagePath('backgroundValidation', null, true)}\")`);\n  app.style.setProperty('--backgroundMobile', `url(\"${getImagePath('background')}\")`);\n  app.style.setProperty('--backgroundMobileValidation', `url(\"${getImagePath('backgroundValidation')}\")`);\n\n  app.style.setProperty('--backgroundColor', result.backgroundColor || '#283847');\n  app.style.setProperty('--buttonColor', result.buttonColor || '#E13A06');\n  app.style.setProperty('--inputBorderColor', result.inputBorderColor || 'transparent');\n  app.style.setProperty('--buttonTextColor', result.buttonTextColor || '#fff');\n  app.style.setProperty('--buttonDisableColor', result.buttonDisableColor || '#E1E1E1');\n  app.style.setProperty('--textColor', result.textColor || '#fff');\n\n  const form = await fetch(\n    `${CiblerContext().endpoint}/api/campaigns/formdatas/${result.id}`\n  ).then((r) => {\n    if (r.ok && r.status === 200) {\n      return r.json();\n    }\n  });\n\n  CiblerContext().form = form;\n\n  saveContext();\n\n  return result;\n};\n\nconst isStringJson = (str) => {\n  let result = null;\n  try {\n    result = JSON.parse(str);\n  } catch (e) {\n    return false;\n  }\n  return !!result;\n};\n\nconst saveContext = () => {\n  localStorage.setItem(`CiblerContext_${d.customerId}`, JSON.stringify(CiblerContext()));\n};\nwindow.saveContext = saveContext;\n\nconst urlEncodeParameters = (details) => {\n  var formBody = [];\n  for (var property in details) {\n    var encodedKey = encodeURIComponent(property);\n    var encodedValue = encodeURIComponent(details[property]);\n    formBody.push(encodedKey + \"=\" + encodedValue);\n  }\n  formBody = formBody.join(\"&\");\n  return formBody;\n};\n\nconst logout = () => {\n  window.CiblerContext = d;\n  saveContext();\n};\n\nconst setCibId = () =>\n  'CIB1.'+Math.floor(Math.random() * 1e9)+'.'+Math.floor((new Date()).getTime() / 1000);\n\nconst getImagePath = (key, suffix, desktop) =>\n  `https://cdn.cibler.io/campaigns/assets/${CiblerContext().campaign.id}/${\n  desktop ? 'desktop' : 'mobile'\n  }/${key}.${suffix || 'png'}`\n\n\nexport {\n  initCiblerContext,\n  fetchPartner,\n  saveContext,\n  isStringJson,\n  CiblerContext,\n  urlEncodeParameters,\n  getQueryString,\n  logout,\n  userLoggedIn,\n  setCibId,\n  getImagePath,\n};\n","import {CiblerContext} from \"./toolbox\";\nimport axios from \"axios\";\n\n\n//login methode using axios \nconst postToLoginService = async (phoneNumber) => {\nconst endpoint = `${CiblerContext().endpoint}/api/bienvenus/login?customerId=318`;\n\nconst body = {\n  phone: phoneNumber ,\n  campaignId: 63080118,\n  customerId: 318\n};\n\nconst headers = {\n  Accept: 'application/json',\n  'Content-Type': 'application/json'\n};\n  const response = await axios.post(endpoint, body , {headers});\n  return response.data;\n}\n\nexport {\n  postToLoginService,\n};","import React, { useState } from 'react';\nimport NoBudget from '../Validation';\nimport Modal from 'react-bootstrap/Modal';\nimport Formfield from '../Formfields/Textfield';\nimport './index.css';\nimport { postToLoginService } from '../../tools/apitools';\n\n\nconst PhonePopup = (props) => {\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [behaviorId, setBehaviorId] = useState('');\n\n \n\n  //close modal and setting states to default \n  const handleClose = () => {\n    props.setShow(false);\n    setPhoneNumber('');\n    setBehaviorId('');\n  }\n\n  //getting postToLoginService and setting the behavior id to bihavior id state \n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const result = await postToLoginService(phoneNumber);\n    setBehaviorId(result.behaviorId);\n  }\n  return (\n    <div>\n        <Modal \n          show={props.show}\n          onHide={handleClose}\n          backdrop=\"static\"\n          keyboard={false}   \n        >\n        <Modal.Header  className=\"header\" closeButton>\n        <Modal.Title className=\"title\">Welcome to CibleR </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n        <form onSubmit={handleSubmit}>\n       \n        <Formfield \n        id=\"phoneId\" value={phoneNumber} onChange={setPhoneNumber}\n        />\n        <button type=\"submit\" className = \"login-button\">Login</button>\n       </form>\n       \n       </Modal.Body>\n       \n        <Modal.Footer> \n       \n        {behaviorId && <NoBudget behaviorId={behaviorId} /> }\n      </Modal.Footer>\n      </Modal>\n    </div>\n  );\n};\n\nexport default PhonePopup;","import React , {useState} from 'react';\nimport PhonePopup from './popUpLogin';\nimport '../index.css';\n\n\n\nconst Landing = ({setScreen}) => {\n  \n  const [show, setShow] = useState(false);\n  const handleCLick = () => {\n    setShow(true);\n  }\n\n  return (\n    <>\n    \n     <div className=\"right\">\n      <button onClick={handleCLick}>Je me connecte</button>\n      <PhonePopup show={show} setShow={setShow}/> \n     \n    </div> \n     \n    </>\n  )\n}\n\nexport default Landing;","import React, {useState} from 'react';\nimport './App.css';\nimport Landing from \"./components/Landing\";\nimport Validation from \"./components/Validation\";\nimport {\n  CiblerContext, initCiblerContext,\n  fetchPartner,\n  saveContext, \n} from \"./tools/toolbox\";\n\n\nfunction App() {\n  const [screen, setScreen] = useState('landing');\n  const [loaded, setLoaded] = useState(false);\n\n  React.useEffect(() => {\n    if (!CiblerContext().endpoint) {\n      initCiblerContext();\n\n      fetchPartner().then(() => {\n        setLoaded(true);\n      });\n    }\n  })\n\n  const router = {\n    landing: Landing,\n    validation: Validation,\n  }\n\n  const handleChangeScreen = (screen) => {\n    CiblerContext().currentScreen = screen;\n    saveContext();\n    setScreen(screen);\n  }\n\n  const Component = router[screen];\n  return (\n    <div className=\"appBackground\">\n      <div className={`app ${screen}`}>\n        {loaded &&\n          <>\n            <Component\n              setScreen={handleChangeScreen}\n            />\n          </>\n        }\n      </div>\n    </div>\n  );\n\n  \n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('ciblerDivRoot')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}